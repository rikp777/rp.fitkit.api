@startuml
' ──────────────────────────────
'   Stijl – identiek aan je oude
' ──────────────────────────────
skinparam activity {
    BackgroundColor #FEFEFE
    BorderColor     #333232
    ArrowColor      #333232
    FontColor       #333232
}
skinparam partition {
    BackgroundColor #F2F2F2
}

title Volledige Flow: Workout Suggestie Algoritme (v2)

start

' ────────── 1. Plan of ad-hoc? ──────────
if ("Request voor geplande\n oefening?") then (Ja)
    :Haal **ExerciseTemplate** op;
    :Lees parameters uit plan\n(minReps, maxReps, sets);
else (Nee)
    :Gebruik **default** parameters\n(8–12 reps, 3 sets);
endif

' ────────── 2. Historie ophalen ──────────
:Haal laatste sessie op\n(incl. sets + RPE);

if ("Heeft vorige sessie?") then (Ja)
    :Bereken *gem. RPE* en\ncount sets ≥ maxReps;

    ' ── 2a. Rep-doel gehaald? ──
    if ("Rep-doel gehaald\n(alle sets ≥ maxReps)?") then (Ja)
        ' ─── 2a-i. Zwaar of te doen? ───
        if ("gem. RPE ≥ 9") then (Zwaar)
            partition Consolidatie {
                :Houd gewicht *gelijk*;
                :Reset reps → **minReps**;
            }
        else (gem. RPE < 9)
            partition Progressie {
                :Verhoog gewicht (+2 – 3 kg);
                :Reset reps → **minReps**;
            }
        endif

    else (Nee – rep-doel **niet** gehaald)
        ' ─── 2b-i. Licht of normaal/zwaar? ───
        if ("gem. RPE ≤ 6") then (Licht)
            partition Volume {
                :Houd gewicht gelijk;
                :Verhoog reps met +1;
            }
        else (gem. RPE > 6)
            partition Stabilisatie {
                :Houd huidige reps & gewicht;
            }
        endif
    endif

else (Nee – geen historie)
    partition Beginner {
        :Genereer standaard\nbeginners-suggestie;
    }
endif

:Stuur suggestie terug;
stop
@enduml
